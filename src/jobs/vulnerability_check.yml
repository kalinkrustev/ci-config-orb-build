description: |
  This job checks for vulnerabilities in the project.
executor: docker
environment:
  MAIN_BRANCH_NAME: main
steps:
  - docker_dependencies
  - checkout
  - configure_nvm
  - display_versions
  - restore_cache_command
  - run:
      name: Create dir for test results
      command: mkdir -p ./audit/results
  - run:
      name: Check for vulnerabilities
      command: npm run audit:check -- -o json > ./audit/results/auditResults.json
  - store_artifacts:
      path: ./audit/results
      destination: audit
